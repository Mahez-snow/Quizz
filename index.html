<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>College Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .quiz-container {
      max-width: 700px;
      width: 100%;
      background: #fff;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    }
    .btn-custom {
      background-color: #667eea;
      color: white;
      transition: 0.3s;
    }
    .btn-custom:hover {
      background-color: #764ba2;
      transform: scale(1.05);
    }
    #timer {
      font-size: 1.2rem;
      font-weight: bold;
      color: #e63946;
    }
    .question {
      font-weight: 600;
      margin-top: 20px;
    }
    .option:hover {
      background: #f1f1f1;
      border-radius: 8px;
      transition: 0.2s;
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <h2 class="text-center mb-4">ðŸŽ“ College Quiz</h2>

    <!-- Student details -->
    <div id="student-form">
      <div class="mb-3">
        <label class="form-label">Full Name</label>
        <input type="text" class="form-control" id="name" required autocomplete="off">
      </div>
      <div class="mb-3">
        <label class="form-label">Register No</label>
        <input type="text" class="form-control" id="register_no" required autocomplete="off">
      </div>
      <div class="mb-3">
        <label class="form-label">Department</label>
        <input type="text" class="form-control" id="department" required autocomplete="off">
      </div>
      <div class="mb-3">
        <label class="form-label">Year</label>
        <input type="text" class="form-control" id="year" required autocomplete="off">
      </div>
      <button class="btn btn-custom w-100" onclick="startQuiz()">ðŸš€ Start Quiz</button>
    </div>

    <!-- Quiz Section -->
    <div id="quiz" class="d-none">
      <p id="timer" class="text-center">Time left: 30:00</p>

      <form id="quizForm">
        <!-- Question 1 -->
        <div class="question">1. What is 2 + 2?</div>
        <div class="form-check option">
          <input class="form-check-input" type="radio" name="q1" value="3">
          <label class="form-check-label">3</label>
        </div>
        <div class="form-check option">
          <input class="form-check-input" type="radio" name="q1" value="4">
          <label class="form-check-label">4</label>
        </div>
        <div class="form-check option">
          <input class="form-check-input" type="radio" name="q1" value="5">
          <label class="form-check-label">5</label>
        </div>

        <!-- Question 2 -->
        <div class="question">2. Capital of France?</div>
        <div class="form-check option">
          <input class="form-check-input" type="radio" name="q2" value="London">
          <label class="form-check-label">London</label>
        </div>
        <div class="form-check option">
          <input class="form-check-input" type="radio" name="q2" value="Paris">
          <label class="form-check-label">Paris</label>
        </div>
        <div class="form-check option">
          <input class="form-check-input" type="radio" name="q2" value="Berlin">
          <label class="form-check-label">Berlin</label>
        </div>

        <div class="d-grid mt-4">
          <button type="button" class="btn btn-success" onclick="submitQuiz()">âœ… Submit Quiz</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Bootstrap JS -->
 
  <script>
    let timer;
    let timeLeft = 30 * 60; // 30 minutes
    let startTime;

    function startQuiz() {
      document.getElementById("student-form").classList.add("d-none");
      document.getElementById("quiz").classList.remove("d-none");
      
      startTime = Date.now();
      timer = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
      let minutes = Math.floor(timeLeft / 60);
      let seconds = timeLeft % 60;
      document.getElementById("timer").innerText =
        "Time left: " + minutes + ":" + (seconds < 10 ? "0" : "") + seconds;

      if (timeLeft <= 0) {
        clearInterval(timer);
        submitQuiz();
      }
      timeLeft--;
    }

    async function submitQuiz() {
      clearInterval(timer);

      const name = document.getElementById("name").value;
      const register_no = document.getElementById("register_no").value;
      const department = document.getElementById("department").value;
      const year = document.getElementById("year").value;

      let score = 0;
      const form = document.forms["quizForm"];
      if (form.q1.value === "4") score++;
      if (form.q2.value === "Paris") score++;

      const time_taken = Math.floor((Date.now() - startTime) / 1000);

      try {
        const res = await fetch("https://quizz-arm7.onrender.com/submit", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ name, register_no, department, year, score, time_taken })
        });

        const data = await res.json();
        alert("Quiz submitted! âœ…");
        //window.location.reload();
      } catch (err) {
        alert("âŒ Error submitting quiz: " + err.message);
      }
    }
    // Disable right click
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    alert("ðŸš« Right click disabled!");
  });

  // Disable some common shortcuts like Ctrl+C, Ctrl+U, F12
  document.addEventListener('keydown', function(e) {
    if (
      (e.ctrlKey && (e.key === 'u' || e.key === 'U')) || // View source
      (e.ctrlKey && (e.key === 'c' || e.key === 'C')) || // Copy
      (e.ctrlKey && (e.key === 's' || e.key === 'S')) || // Save
      (e.key === "F12") // Dev tools
    ) {
      e.preventDefault();
      alert("ðŸš« This action is disabled!");
    }
  });
 //const res = await fetch("https://quizz-arm7.onrender.com/submit", {
  //method: "POST",
  //headers: { "Content-Type": "application/json" },
  //body: JSON.stringify({ name, register_no, department, year, score, time_takenÂ })
//});
  </script>
</body>
</html>
